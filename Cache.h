#pragma once
#include"Storer.h"
#include"Ring.h"

//?›¥????????????keys(SeriesKey+fieldKey)??values
class Cache{
public:
	Cache();

	~Cache();

	//??????????key_num_ ???????????????????(????key,map??????????????key)
	bool FlushToFile(map<Key, Values>& data);

	//??????????????size>max_size????false?????????????????true
	bool AddData(Key& key, string field_value, string value_type, uint64_t timestamp); 

	//????????????value
	bool SearchData(Key key, uint64_t timestamp,vector<string>& values);

	//????????value??????
	bool SearchData(Key key, vector<string>& values, vector<uint64_t>& times);
private:
	uint64_t size_;
	uint64_t max_size_;

	Ring* ring_;
};